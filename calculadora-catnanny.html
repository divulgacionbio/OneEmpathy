<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Tarifas Rentables para una Cat Nanny</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-btn.active {
            background-color: #8B5CF6; /* violet-500 */
            color: white;
            font-weight: 600;
        }
        .tab-btn {
            transition: all 0.3s ease-in-out;
        }
        .input-yellow {
            background-color: #FEF9C3; /* yellow-100 */
            border-color: #FBBF24; /* amber-400 */
        }
        .input-yellow:focus {
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.4);
            outline: none;
        }
        .result-green {
            background-color: #D1FAE5; /* green-100 */
            color: #065F46; /* green-800 */
            font-weight: 700;
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4C1D95; /* violet-900 */
            border-bottom: 2px solid #C4B5FD; /* violet-300 */
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .icon-emoji {
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body class="bg-violet-50 text-gray-800 antialiased">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-violet-800">Calculadora de tarifas rentables</h1>
            <p class="text-lg text-violet-600 mt-2">😻😻😻😻😻 Cat Nanny 5⭐⭐⭐⭐⭐</p>
        </header>

        <!-- Controles de Pestañas -->
        <div class="flex justify-center mb-8 rounded-lg shadow bg-white p-2 space-x-2">
            <button id="btn-instructions" class="tab-btn w-full py-2 px-4 rounded-md text-gray-600">
                Instrucciones
            </button>
            <button id="btn-calculator" class="tab-btn active w-full py-2 px-4 rounded-md">
                Calculadora
            </button>
        </div>

        <!-- Pestaña de Instrucciones -->
        <div id="instructions-content" class="bg-white p-6 rounded-lg shadow-md hidden">
            <h2 class="section-title"><span class="icon-emoji">📖</span>¡Bienvenida, futura empresaria!</h2>
            <p class="mb-4 text-gray-700">Esta no es solo una hoja de cálculo, es una herramienta indispensable para complementar tu negocio y hacerlo rentable y sostenible. Di adiós a las adivinanzas y hola a la claridad financiera.</p>
            <p class="mb-4 font-semibold text-violet-700">Sigue estos sencillos pasos para descubrir tu poder:</p>
            <ol class="list-decimal list-inside space-y-3 text-gray-600">
                <li>Ve a la pestaña <strong>'Calculadora'</strong>.</li>
                <li>Rellena <strong>ÚNICAMENTE</strong> las celdas de color amarillo <span class="inline-block px-2 py-1 text-sm rounded-md bg-yellow-100 border border-yellow-300">🟡</span>.</li>
                <li>Observa cómo tus tarifas recomendadas aparecen mágicamente en la sección de resultados verdes <span class="inline-block px-2 py-1 text-sm rounded-md bg-green-100 border border-green-300">🟢</span>.</li>
                <li>¡Juega con los números! Experimenta para ver diferentes escenarios. ¿Qué pasa si quieres trabajar menos horas? ¿O ganar más? Tú tienes el control.</li>
            </ol>
        </div>

        <!-- Pestaña de Calculadora -->
        <div id="calculator-content" class="space-y-8">
            
            <!-- Sección A: Meta de Ingresos -->
            <section class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="section-title"><span class="icon-emoji">몽</span>Sección A: Tu meta de ingresos (El Sueño)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="monthlyGoal" class="block text-sm font-medium text-gray-700 mb-1">¿Cuánto te gustaría ganar al mes (neto)?</label>
                        <input type="number" id="monthlyGoal" class="w-full p-2 border rounded-md input-yellow" placeholder="ej: 1500000">
                    </div>
                    <div>
                        <label for="hoursPerWeek" class="block text-sm font-medium text-gray-700 mb-1">¿Cuántas horas a la semana quieres dedicar?</label>
                        <input type="number" id="hoursPerWeek" class="w-full p-2 border rounded-md input-yellow" placeholder="ej: 20">
                    </div>
                    <div>
                        <label for="weeksPerYear" class="block text-sm font-medium text-gray-700 mb-1">¿Cuántas semanas al año quieres trabajar?</label>
                        <input type="number" id="weeksPerYear" class="w-full p-2 border rounded-md input-yellow" placeholder="ej: 48">
                    </div>
                </div>
            </section>

            <!-- Sección B: Costos Fijos -->
            <section class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="section-title"><span class="icon-emoji">🧾</span>Sección B: Tus costos (La realidad del negocio)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="number" id="marketing" class="w-full p-2 border rounded-md input-yellow" placeholder="Marketing y Publicidad">
                    <input type="number" id="software" class="w-full p-2 border rounded-md input-yellow" placeholder="Software y Apps">
                    <input type="number" id="phoneInternet" class="w-full p-2 border rounded-md input-yellow" placeholder="Telefonía e Internet">
                    <input type="number" id="insurance" class="w-full p-2 border rounded-md input-yellow" placeholder="Seguro de Responsabilidad Civil">
                    <input type="number" id="training" class="w-full p-2 border rounded-md input-yellow" placeholder="Capacitación Continua">
                    <input type="number" id="transport" class="w-full p-2 border rounded-md input-yellow" placeholder="Transporte (promedio mensual)">
                    <input type="number" id="otherCosts" class="w-full p-2 border rounded-md input-yellow" placeholder="Otros (uniformes, etc.)">
                    <input type="number" id="taxSavingsPercent" class="w-full p-2 border rounded-md input-yellow" placeholder="% para Impuestos y Ahorros (ej: 20)">
                    <input type="number" id="transportPerVisit" class="w-full p-2 border rounded-md input-yellow md:col-span-2" placeholder="Costo de Traslado Promedio por Visita">
                </div>
                 <div class="mt-6">
                    <p class="text-sm font-medium text-gray-700">Costo Fijo Mensual Total:</p>
                    <p id="totalFixedCost" class="text-xl font-bold text-violet-800 p-2 bg-violet-100 rounded-md">$0</p>
                </div>
            </section>

            <!-- Sección D: Resultados -->
            <section class="bg-gradient-to-br from-violet-600 to-purple-700 p-6 rounded-lg shadow-lg text-white">
                 <h2 class="text-2xl font-bold mb-4 text-center"><span class="icon-emoji">🎉</span>¡Tus tarifas para un servicio de calidad!</h2>
                <div class="space-y-6">
                    <!-- Tarifa Mínima por Hora -->
                    <div class="bg-white/20 p-4 rounded-lg">
                        <p class="text-sm font-medium uppercase tracking-wider opacity-90">Tu Tarifa Mínima por Hora</p>
                        <p id="minRateOutput" class="text-3xl font-bold result-green p-3 rounded-md text-center mt-2">$0</p>
                        <p class="text-xs text-center mt-2 opacity-80">Esta es tu base. Cobrar menos significa que no estás alcanzando tus metas.</p>
                    </div>
                    <!-- Tarifa Objetivo por Hora -->
                    <div class="bg-white/20 p-4 rounded-lg">
                        <p class="text-sm font-medium uppercase tracking-wider opacity-90">Tu Tarifa Objetivo por Hora (con 15% de margen)</p>
                        <p id="targetRateOutput" class="text-3xl font-bold result-green p-3 rounded-md text-center mt-2">$0</p>
                        <p class="text-xs text-center mt-2 opacity-80">Esta es la tarifa que te permite crecer y reinvertir. ¡Apunta a esta!</p>
                    </div>
                    <!-- Tarifas por Servicio -->
                    <div>
                        <p class="text-sm font-medium uppercase tracking-wider opacity-90 text-center mb-2">Tarifas Sugeridas por Servicio</p>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
                            <div class="bg-white/90 text-violet-800 p-3 rounded-md">
                                <p class="font-semibold">Visita Express (30 min)</p>
                                <p id="expressVisitRate" class="text-2xl font-bold mt-1">$0</p>
                            </div>
                            <div class="bg-white text-violet-900 p-4 rounded-md shadow-lg scale-105">
                                <p class="font-bold">Visita Estándar<br>(60 min)</p>
                                <p id="standardVisitRate" class="text-3xl font-bold mt-1">$0</p>
                            </div>
                            <div class="bg-white/90 text-violet-800 p-3 rounded-md">
                                <p class="font-semibold">Visita Extendida<br>(90 min)</p>
                                <p id="extendedVisitRate" class="text-2xl font-bold mt-1">$0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const inputs = document.querySelectorAll('input[type="number"]');
        
        // Tab elements
        const btnInstructions = document.getElementById('btn-instructions');
        const btnCalculator = document.getElementById('btn-calculator');
        const instructionsContent = document.getElementById('instructions-content');
        const calculatorContent = document.getElementById('calculator-content');
        
        // Input fields
        const monthlyGoalEl = document.getElementById('monthlyGoal');
        const hoursPerWeekEl = document.getElementById('hoursPerWeek');
        const weeksPerYearEl = document.getElementById('weeksPerYear');
        const transportPerVisitEl = document.getElementById('transportPerVisit');
        const taxSavingsPercentEl = document.getElementById('taxSavingsPercent');
        
        const costInputs = [
            'marketing', 'software', 'phoneInternet', 'insurance', 'training', 'transport', 'otherCosts'
        ].map(id => document.getElementById(id));

        // Output fields
        const totalFixedCostEl = document.getElementById('totalFixedCost');
        const minRateOutputEl = document.getElementById('minRateOutput');
        const targetRateOutputEl = document.getElementById('targetRateOutput');
        const expressVisitRateEl = document.getElementById('expressVisitRate');
        const standardVisitRateEl = document.getElementById('standardVisitRate');
        const extendedVisitRateEl = document.getElementById('extendedVisitRate');

        // --- Currency Formatter ---
        const currencyFormatter = new Intl.NumberFormat('es-CO', {
            style: 'currency',
            currency: 'COP',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        });

        // --- Main Calculation Logic ---
        function calculate() {
            // Read values from inputs, default to 0 if empty
            const monthlyGoal = parseFloat(monthlyGoalEl.value) || 0;
            const hoursPerWeek = parseFloat(hoursPerWeekEl.value) || 0;
            const weeksPerYear = parseFloat(weeksPerYearEl.value) || 0;
            const transportPerVisit = parseFloat(transportPerVisitEl.value) || 0;
            const taxSavingsPercent = parseFloat(taxSavingsPercentEl.value) || 0;
            
            // B. Calculate total fixed monthly cost
            const totalFixedCosts = costInputs.reduce((sum, input) => sum + (parseFloat(input.value) || 0), 0);
            
            // C. The Calculation Engine (La Magia Oculta)
            const taxMultiplier = 1 - (taxSavingsPercent / 100);
            const grossMonthlyIncomeNeeded = taxMultiplier > 0 ? (monthlyGoal + totalFixedCosts) / taxMultiplier : (monthlyGoal + totalFixedCosts);
            const grossAnnualIncomeNeeded = grossMonthlyIncomeNeeded * 12;
            const totalWorkHoursPerYear = hoursPerWeek * weeksPerYear;
            const minViableRatePerHour = totalWorkHoursPerYear > 0 ? grossAnnualIncomeNeeded / totalWorkHoursPerYear : 0;
            
            // D. The Elite Rates (El Gran Resultado)
            const targetRatePerHour = minViableRatePerHour * 1.15;
            const expressVisit = (targetRatePerHour / 2) + transportPerVisit;
            const standardVisit = targetRatePerHour + transportPerVisit;
            const extendedVisit = (targetRatePerHour * 1.5) + transportPerVisit;
            
            // --- Update UI ---
            updateUI({
                totalFixedCosts,
                minViableRatePerHour,
                targetRatePerHour,
                expressVisit,
                standardVisit,
                extendedVisit
            });
        }

        // --- UI Update Function ---
        function updateUI(results) {
            totalFixedCostEl.textContent = currencyFormatter.format(results.totalFixedCosts);
            minRateOutputEl.textContent = currencyFormatter.format(results.minViableRatePerHour);
            targetRateOutputEl.textContent = currencyFormatter.format(results.targetRatePerHour);
            expressVisitRateEl.textContent = currencyFormatter.format(results.expressVisit);
            standardVisitRateEl.textContent = currencyFormatter.format(results.standardVisit);
            extendedVisitRateEl.textContent = currencyFormatter.format(results.extendedVisit);
        }

        // --- Event Listeners ---
        inputs.forEach(input => {
            input.addEventListener('input', calculate);
        });
        
        // Tab switching logic
        btnCalculator.addEventListener('click', () => {
            instructionsContent.classList.add('hidden');
            calculatorContent.classList.remove('hidden');
            btnCalculator.classList.add('active');
            btnInstructions.classList.remove('active');
        });

        btnInstructions.addEventListener('click', () => {
            instructionsContent.classList.remove('hidden');
            calculatorContent.classList.add('hidden');
            btnInstructions.classList.add('active');
            btnCalculator.classList.remove('active');
        });

        // --- Initial State ---
        // Switch to instructions tab on page load for first-time users
        btnInstructions.click();

    </script>
</body>
</html>
